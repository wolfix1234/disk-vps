Simple API Usage Guide
Status
All middleware and CORS issues resolved. API is clean and simple.
Authentication
All endpoints require this header:
Authorization: Bearer mamad

Documentation

Swagger UI: http://localhost:5002/docs
ReDoc: http://localhost:5002/redoc
Health Check: http://localhost:5002/health

PowerShell Examples (Windows)
Health Check
Invoke-RestMethod -Uri "http://localhost:5002/health" -Method GET

Initialize Store
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/my-store/initialize" -Method POST -Headers @{"Authorization"="Bearer mamad"}

List JSON Files
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/my-store/json" -Method GET -Headers @{"Authorization"="Bearer mamad"}

Get JSON File
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/my-store/json/homelg.json" -Method GET -Headers @{"Authorization"="Bearer mamad"}

Update JSON File
$data = @{
    children = @{
        type = "home"
        metaData = @{
            title = "My Updated Page"
            description = "Updated via API"
        }
    }
} | ConvertTo-Json -Depth 10

Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/my-store/json/homelg.json" -Method PUT -Headers @{"Authorization"="Bearer mamad"; "Content-Type"="application/json"} -Body $data

List Images
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/my-store/images" -Method GET -Headers @{"Authorization"="Bearer mamad"}

Bash/curl Examples (Linux/Mac/Git Bash)
Health Check
curl http://localhost:5002/health

Initialize Store
curl -X POST "http://localhost:5002/api/v1/stores/my-store/initialize" -H "Authorization: Bearer mamad"

List JSON Files
curl -X GET "http://localhost:5002/api/v1/stores/my-store/json" -H "Authorization: Bearer mamad"

Get JSON File
curl -X GET "http://localhost:5002/api/v1/stores/my-store/json/homelg.json" -H "Authorization: Bearer mamad"

Update JSON File
curl -X PUT "http://localhost:5002/api/v1/stores/my-store/json/homelg.json" \
  -H "Authorization: Bearer mamad" \
  -H "Content-Type: application/json" \
  -d '{"children":{"type":"home","metaData":{"title":"Updated Title","description":"Updated via curl"}}}'

Swagger UI Usage

Open: http://localhost:5002/docs
Click: Authorize button
Enter: mamad (just the token, no "Bearer")
Click: Authorize then Close
Test: Any endpoint will now work!

Available Endpoints



Method
Endpoint
Description



GET
/health
Health check


POST
/api/v1/stores/{store_id}/initialize
Initialize store


GET
/api/v1/stores/{store_id}/json
List JSON files


GET
/api/v1/stores/{store_id}/json/{filename}
Get JSON file


PUT
/api/v1/stores/{store_id}/json/{filename}
Update JSON file


GET
/api/v1/stores/{store_id}/images
List images


POST
/api/v1/stores/{store_id}/images
Upload image


DELETE
/api/v1/stores/{store_id}/images/{filename}
Delete image


POST
/api/v1/stores/{store_id}/json/templates
Create template


DELETE
/api/v1/stores/{store_id}/json/templates/{name}
Delete template


Quick Test
# Test health
Invoke-RestMethod -Uri "http://localhost:5002/health" -Method GET

# Test API with auth
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/test/initialize" -Method POST -Headers @{"Authorization"="Bearer mamad"}

# List files
Invoke-RestMethod -Uri "http://localhost:5002/api/v1/stores/test/json" -Method GET -Headers @{"Authorization"="Bearer mamad"}

What's Fixed

No more middleware issues
No more CORS problems
Swagger UI works perfectly
All endpoints accessible
Clean, simple responses
Easy development and testing

Start Server
python run.py

API is now working perfectly!
